import { useMemo, useState } from 'react'
import ProductCard from './ProductCard'
export default function Catalog({products,onAdd,baseDiscount}){const[q,setQ]=useState('');const[cat,setCat]=useState('همه');const cats=useMemo(()=>['همه',...Array.from(new Set(products.map(p=>p.category)))],[products]);const list=products.filter(p=>(cat==='همه'||p.category===cat)&&(p.name.includes(q)||p.sku?.includes(q)));return(<div className='space-y-3'><div className='flex gap-2'><input value={q} onChange={e=>setQ(e.target.value)} placeholder='جستجو...' className='flex-1 border rounded-xl p-2'/><select value={cat} onChange={e=>setCat(e.target.value)} className='border rounded-xl p-2'>{cats.map(c=><option key={c}>{c}</option>)}</select></div><div className='grid grid-cols-2 sm:grid-cols-3 gap-3'>{list.map(p=><ProductCard key={p.id} p={p} onAdd={onAdd} baseDiscount={baseDiscount}/>)}</div></div>)}